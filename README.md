# image-compression-javascript

A demo compressing images with JavaScript.

It can compress images via the following aspects:

* Resolution
* Color conversion
* Image format
* Image quality

It can run a batch test to get an idea of how those aspects can impact the final size.

[Online demo](https://tony-xlh.github.io/image-compression-javascript/)

[Online demo using canvas](https://tony-xlh.github.io/image-compression-javascript/canvas.html)

The major demo uses [Dynamsoft Document Viewer](https://www.dynamsoft.com/document-viewer/docs/introduction/index.html) to perform color conversion, resizing and saving. It has some benefits over HTML5 canvas. For example, if we convert the image into black & white, using Dynamsoft Document Viewer, we can save the image as a 1-bit depth image file to save storage.

## Usage

We can compress images to save storage and improve the performance of uploading an image.

Document scanning and server-side barcode scanning can benefit from this.

## Color Conversion Modes Supported

* Grayscale
* Black & white

## Image Formats Supported

* PNG
* JPEG
* WebP
* FAX4 (CCITT-4)
* JBIG2
* JP2000
* LZW

The latter four are mainly used for PDF. We use [Dynamsoft Document Viewer](https://www.dynamsoft.com/document-viewer/docs/introduction/index.html) to get the image compressed in the four types.

## Test Result

Here is the result of a test using the following sample image:

![A4-cropped](https://github.com/user-attachments/assets/09b67826-078f-450b-a1f7-b06264ab4812)

<table>
  <thead>
    <tr>
      <th>Color Conversion</th>
      <th>Image Format</th>
      <th>Quality</th>
      <th>Size</th>
      <th>Time Elapsed</th>
      <th>Compression Rate</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>No conversion</td><td>image/png</td><td>1</td><td>9506.63KB</td><td>1763ms</td><td>440.60%</td></tr><tr><td>No conversion</td><td>image/jpeg</td><td>0.1</td><td>272.04KB</td><td>580ms</td><td>12.61%</td></tr><tr><td>No conversion</td><td>image/jpeg</td><td>0.2</td><td>326.59KB</td><td>613ms</td><td>15.14%</td></tr><tr><td>No conversion</td><td>image/jpeg</td><td>0.3</td><td>375.83KB</td><td>581ms</td><td>17.42%</td></tr><tr><td>No conversion</td><td>image/jpeg</td><td>0.4</td><td>428.28KB</td><td>598ms</td><td>19.85%</td></tr><tr><td>No conversion</td><td>image/jpeg</td><td>0.5</td><td>498.50KB</td><td>618ms</td><td>23.10%</td></tr><tr><td>No conversion</td><td>image/jpeg</td><td>0.6</td><td>576.01KB</td><td>608ms</td><td>26.70%</td></tr><tr><td>No conversion</td><td>image/jpeg</td><td>0.7</td><td>750.01KB</td><td>590ms</td><td>34.76%</td></tr><tr><td>No conversion</td><td>image/jpeg</td><td>0.8</td><td>1069.88KB</td><td>590ms</td><td>49.59%</td></tr><tr><td>No conversion</td><td>image/jpeg</td><td>0.9</td><td>1827.61KB</td><td>604ms</td><td>84.70%</td></tr><tr><td>No conversion</td><td>image/jpeg</td><td>1</td><td>4049.13KB</td><td>635ms</td><td>187.66%</td></tr><tr><td>No conversion</td><td>image/webp</td><td>0.1</td><td>103.14KB</td><td>2869ms</td><td>4.78%</td></tr><tr><td>No conversion</td><td>image/webp</td><td>0.2</td><td>119.90KB</td><td>2804ms</td><td>5.56%</td></tr><tr><td>No conversion</td><td>image/webp</td><td>0.3</td><td>137.97KB</td><td>2912ms</td><td>6.39%</td></tr><tr><td>No conversion</td><td>image/webp</td><td>0.4</td><td>162.52KB</td><td>2816ms</td><td>7.53%</td></tr><tr><td>No conversion</td><td>image/webp</td><td>0.5</td><td>189.29KB</td><td>2951ms</td><td>8.77%</td></tr><tr><td>No conversion</td><td>image/webp</td><td>0.6</td><td>218.95KB</td><td>2886ms</td><td>10.15%</td></tr><tr><td>No conversion</td><td>image/webp</td><td>0.7</td><td>245.80KB</td><td>2852ms</td><td>11.39%</td></tr><tr><td>No conversion</td><td>image/webp</td><td>0.8</td><td>355.04KB</td><td>2946ms</td><td>16.45%</td></tr><tr><td>No conversion</td><td>image/webp</td><td>0.9</td><td>817.46KB</td><td>3029ms</td><td>37.89%</td></tr><tr><td>No conversion</td><td>image/webp</td><td>1</td><td>5964.65KB</td><td>4900ms</td><td>276.44%</td></tr><tr><td>No conversion</td><td>pdf/jbig2</td><td>1</td><td>1070.78KB</td><td>684ms</td><td>49.63%</td></tr><tr><td>No conversion</td><td>pdf/fax4</td><td>1</td><td>1070.78KB</td><td>613ms</td><td>49.63%</td></tr><tr><td>No conversion</td><td>pdf/jp2000</td><td>0.1</td><td>1.11KB</td><td>2398ms</td><td>0.05%</td></tr><tr><td>No conversion</td><td>pdf/jp2000</td><td>0.2</td><td>1.51KB</td><td>2612ms</td><td>0.07%</td></tr><tr><td>No conversion</td><td>pdf/jp2000</td><td>0.3</td><td>35.31KB</td><td>2599ms</td><td>1.64%</td></tr><tr><td>No conversion</td><td>pdf/jp2000</td><td>0.4</td><td>239.69KB</td><td>2550ms</td><td>11.11%</td></tr><tr><td>No conversion</td><td>pdf/jp2000</td><td>0.5</td><td>1976.63KB</td><td>2592ms</td><td>91.61%</td></tr><tr><td>No conversion</td><td>pdf/jp2000</td><td>0.6</td><td>3915.27KB</td><td>2570ms</td><td>181.46%</td></tr><tr><td>No conversion</td><td>pdf/jp2000</td><td>0.7</td><td>4577.19KB</td><td>2568ms</td><td>212.14%</td></tr><tr><td>No conversion</td><td>pdf/jp2000</td><td>0.8</td><td>4782.33KB</td><td>2551ms</td><td>221.65%</td></tr><tr><td>No conversion</td><td>pdf/jp2000</td><td>0.9</td><td>4836.04KB</td><td>2547ms</td><td>224.13%</td></tr><tr><td>No conversion</td><td>pdf/jp2000</td><td>1</td><td>4843.24KB</td><td>2550ms</td><td>224.47%</td></tr><tr><td>No conversion</td><td>pdf/lzw</td><td>1</td><td>9142.31KB</td><td>1243ms</td><td>423.72%</td></tr><tr><td>Grayscale</td><td>image/png</td><td>1</td><td>6001.92KB</td><td>573ms</td><td>278.17%</td></tr><tr><td>Grayscale</td><td>image/jpeg</td><td>0.1</td><td>224.03KB</td><td>268ms</td><td>10.38%</td></tr><tr><td>Grayscale</td><td>image/jpeg</td><td>0.2</td><td>277.29KB</td><td>262ms</td><td>12.85%</td></tr><tr><td>Grayscale</td><td>image/jpeg</td><td>0.3</td><td>327.86KB</td><td>258ms</td><td>15.20%</td></tr><tr><td>Grayscale</td><td>image/jpeg</td><td>0.4</td><td>388.02KB</td><td>266ms</td><td>17.98%</td></tr><tr><td>Grayscale</td><td>image/jpeg</td><td>0.5</td><td>407.98KB</td><td>260ms</td><td>18.91%</td></tr><tr><td>Grayscale</td><td>image/jpeg</td><td>0.6</td><td>777.40KB</td><td>272ms</td><td>36.03%</td></tr><tr><td>Grayscale</td><td>image/jpeg</td><td>0.7</td><td>951.35KB</td><td>284ms</td><td>44.09%</td></tr><tr><td>Grayscale</td><td>image/jpeg</td><td>0.8</td><td>1012.78KB</td><td>278ms</td><td>46.94%</td></tr><tr><td>Grayscale</td><td>image/jpeg</td><td>0.9</td><td>1406.44KB</td><td>283ms</td><td>65.18%</td></tr><tr><td>Grayscale</td><td>image/jpeg</td><td>1</td><td>3213.54KB</td><td>313ms</td><td>148.94%</td></tr><tr><td>Grayscale</td><td>image/webp</td><td>0.1</td><td>98.02KB</td><td>1419ms</td><td>4.54%</td></tr><tr><td>Grayscale</td><td>image/webp</td><td>0.2</td><td>117.39KB</td><td>1473ms</td><td>5.44%</td></tr><tr><td>Grayscale</td><td>image/webp</td><td>0.3</td><td>136.96KB</td><td>1439ms</td><td>6.35%</td></tr><tr><td>Grayscale</td><td>image/webp</td><td>0.4</td><td>162.58KB</td><td>1466ms</td><td>7.53%</td></tr><tr><td>Grayscale</td><td>image/webp</td><td>0.5</td><td>191.67KB</td><td>1483ms</td><td>8.88%</td></tr><tr><td>Grayscale</td><td>image/webp</td><td>0.6</td><td>225.83KB</td><td>1539ms</td><td>10.47%</td></tr><tr><td>Grayscale</td><td>image/webp</td><td>0.7</td><td>257.49KB</td><td>1504ms</td><td>11.93%</td></tr><tr><td>Grayscale</td><td>image/webp</td><td>0.8</td><td>391.60KB</td><td>1611ms</td><td>18.15%</td></tr><tr><td>Grayscale</td><td>image/webp</td><td>0.9</td><td>856.50KB</td><td>1717ms</td><td>39.70%</td></tr><tr><td>Grayscale</td><td>image/webp</td><td>1</td><td>5990.37KB</td><td>3264ms</td><td>277.63%</td></tr><tr><td>Grayscale</td><td>pdf/jbig2</td><td>1</td><td>1013.68KB</td><td>418ms</td><td>46.98%</td></tr><tr><td>Grayscale</td><td>pdf/fax4</td><td>1</td><td>1013.68KB</td><td>335ms</td><td>46.98%</td></tr><tr><td>Grayscale</td><td>pdf/jp2000</td><td>0.1</td><td>1.09KB</td><td>1429ms</td><td>0.05%</td></tr><tr><td>Grayscale</td><td>pdf/jp2000</td><td>0.2</td><td>1.49KB</td><td>1428ms</td><td>0.07%</td></tr><tr><td>Grayscale</td><td>pdf/jp2000</td><td>0.3</td><td>35.25KB</td><td>1425ms</td><td>1.63%</td></tr><tr><td>Grayscale</td><td>pdf/jp2000</td><td>0.4</td><td>247.83KB</td><td>1447ms</td><td>11.49%</td></tr><tr><td>Grayscale</td><td>pdf/jp2000</td><td>0.5</td><td>1759.55KB</td><td>1459ms</td><td>81.55%</td></tr><tr><td>Grayscale</td><td>pdf/jp2000</td><td>0.6</td><td>3337.76KB</td><td>1499ms</td><td>154.69%</td></tr><tr><td>Grayscale</td><td>pdf/jp2000</td><td>0.7</td><td>3816.45KB</td><td>1461ms</td><td>176.88%</td></tr><tr><td>Grayscale</td><td>pdf/jp2000</td><td>0.8</td><td>3878.43KB</td><td>1488ms</td><td>179.75%</td></tr><tr><td>Grayscale</td><td>pdf/jp2000</td><td>0.9</td><td>3884.98KB</td><td>1466ms</td><td>180.06%</td></tr><tr><td>Grayscale</td><td>pdf/jp2000</td><td>1</td><td>3885.36KB</td><td>1460ms</td><td>180.07%</td></tr><tr><td>Grayscale</td><td>pdf/lzw</td><td>1</td><td>5301.60KB</td><td>476ms</td><td>245.71%</td></tr><tr><td>Black &amp; white</td><td>image/png</td><td>1</td><td>130.18KB</td><td>115ms</td><td>6.03%</td></tr><tr><td>Black &amp; white</td><td>image/jpeg</td><td>0.1</td><td>363.82KB</td><td>374ms</td><td>16.86%</td></tr><tr><td>Black &amp; white</td><td>image/jpeg</td><td>0.2</td><td>472.41KB</td><td>190ms</td><td>21.89%</td></tr><tr><td>Black &amp; white</td><td>image/jpeg</td><td>0.3</td><td>570.84KB</td><td>192ms</td><td>26.46%</td></tr><tr><td>Black &amp; white</td><td>image/jpeg</td><td>0.4</td><td>642.30KB</td><td>191ms</td><td>29.77%</td></tr><tr><td>Black &amp; white</td><td>image/jpeg</td><td>0.5</td><td>706.09KB</td><td>192ms</td><td>32.72%</td></tr><tr><td>Black &amp; white</td><td>image/jpeg</td><td>0.6</td><td>771.68KB</td><td>195ms</td><td>35.76%</td></tr><tr><td>Black &amp; white</td><td>image/jpeg</td><td>0.7</td><td>855.62KB</td><td>198ms</td><td>39.66%</td></tr><tr><td>Black &amp; white</td><td>image/jpeg</td><td>0.8</td><td>974.84KB</td><td>194ms</td><td>45.18%</td></tr><tr><td>Black &amp; white</td><td>image/jpeg</td><td>0.9</td><td>1222.58KB</td><td>195ms</td><td>56.66%</td></tr><tr><td>Black &amp; white</td><td>image/jpeg</td><td>1</td><td>2258.45KB</td><td>215ms</td><td>104.67%</td></tr><tr><td>Black &amp; white</td><td>image/webp</td><td>0.1</td><td>290.87KB</td><td>1037ms</td><td>13.48%</td></tr><tr><td>Black &amp; white</td><td>image/webp</td><td>0.2</td><td>327.36KB</td><td>1057ms</td><td>15.17%</td></tr><tr><td>Black &amp; white</td><td>image/webp</td><td>0.3</td><td>352.60KB</td><td>832ms</td><td>16.34%</td></tr><tr><td>Black &amp; white</td><td>image/webp</td><td>0.4</td><td>378.89KB</td><td>856ms</td><td>17.56%</td></tr><tr><td>Black &amp; white</td><td>image/webp</td><td>0.5</td><td>396.79KB</td><td>875ms</td><td>18.39%</td></tr><tr><td>Black &amp; white</td><td>image/webp</td><td>0.6</td><td>416.35KB</td><td>869ms</td><td>19.30%</td></tr><tr><td>Black &amp; white</td><td>image/webp</td><td>0.7</td><td>432.61KB</td><td>858ms</td><td>20.05%</td></tr><tr><td>Black &amp; white</td><td>image/webp</td><td>0.8</td><td>469.18KB</td><td>868ms</td><td>21.74%</td></tr><tr><td>Black &amp; white</td><td>image/webp</td><td>0.9</td><td>543.33KB</td><td>889ms</td><td>25.18%</td></tr><tr><td>Black &amp; white</td><td>image/webp</td><td>1</td><td>107.07KB</td><td>259ms</td><td>4.96%</td></tr><tr><td>Black &amp; white</td><td>pdf/jbig2</td><td>1</td><td>58.00KB</td><td>198ms</td><td>2.69%</td></tr><tr><td>Black &amp; white</td><td>pdf/fax4</td><td>1</td><td>127.27KB</td><td>124ms</td><td>5.90%</td></tr><tr><td>Black &amp; white</td><td>pdf/jp2000</td><td>0.1</td><td>58.00KB</td><td>185ms</td><td>2.69%</td></tr><tr><td>Black &amp; white</td><td>pdf/jp2000</td><td>0.2</td><td>58.00KB</td><td>189ms</td><td>2.69%</td></tr><tr><td>Black &amp; white</td><td>pdf/jp2000</td><td>0.3</td><td>58.00KB</td><td>175ms</td><td>2.69%</td></tr><tr><td>Black &amp; white</td><td>pdf/jp2000</td><td>0.4</td><td>58.00KB</td><td>185ms</td><td>2.69%</td></tr><tr><td>Black &amp; white</td><td>pdf/jp2000</td><td>0.5</td><td>58.00KB</td><td>176ms</td><td>2.69%</td></tr><tr><td>Black &amp; white</td><td>pdf/jp2000</td><td>0.6</td><td>58.00KB</td><td>175ms</td><td>2.69%</td></tr><tr><td>Black &amp; white</td><td>pdf/jp2000</td><td>0.7</td><td>58.00KB</td><td>177ms</td><td>2.69%</td></tr><tr><td>Black &amp; white</td><td>pdf/jp2000</td><td>0.8</td><td>58.00KB</td><td>189ms</td><td>2.69%</td></tr><tr><td>Black &amp; white</td><td>pdf/jp2000</td><td>0.9</td><td>58.00KB</td><td>177ms</td><td>2.69%</td></tr><tr><td>Black &amp; white</td><td>pdf/jp2000</td><td>1</td><td>58.00KB</td><td>184ms</td><td>2.69%</td></tr><tr><td>Black &amp; white</td><td>pdf/lzw</td><td>1</td><td>127.27KB</td><td>110ms</td><td>5.90%</td></tr>
  </tbody>
</table>