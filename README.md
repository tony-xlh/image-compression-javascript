# image-compression-javascript

A demo compressing images with JavaScript.

It can compress images via the following aspects:

* Resolution
* Color conversion
* Image format
* Image quality

It can run a batch test to get an idea of how those aspects can impact the final size.

[Online demo](https://tony-xlh.github.io/image-compression-javascript/)

## Color Conversion Modes Supported

* Grayscale
* Black & white with a 50% threshold

## Image Formats Supported

* PNG
* JPEG
* WebP
* FAX4 (CCITT-4)
* JBIG2
* JP2000
* LZX

The latter four are mainly used for PDF. We use [Dynamsoft Document Viewer](https://www.dynamsoft.com/document-viewer/docs/introduction/index.html) to get the image compressed in the four types.

## Test Result

Here is the result of a test using the following sample image:

![A4-cropped](https://github.com/user-attachments/assets/09b67826-078f-450b-a1f7-b06264ab4812)

<table>
        <thead>
          <tr>
            <th>Color Conversion</th>
            <th>Image Format</th>
            <th>Quality</th>
            <th>Size</th>
            <th>Time Elapsed</th>
            <th>Compression Rate</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>No conversion</td><td>image/png</td><td>1</td><td>10318.12KB</td><td>985ms</td><td>478.21%</td></tr><tr><td>No conversion</td><td>image/jpeg</td><td>0.1</td><td>170.30KB</td><td>104ms</td><td>7.89%</td></tr><tr><td>No conversion</td><td>image/jpeg</td><td>0.2</td><td>234.31KB</td><td>103ms</td><td>10.86%</td></tr><tr><td>No conversion</td><td>image/jpeg</td><td>0.3</td><td>291.82KB</td><td>115ms</td><td>13.52%</td></tr><tr><td>No conversion</td><td>image/jpeg</td><td>0.4</td><td>350.89KB</td><td>122ms</td><td>16.26%</td></tr><tr><td>No conversion</td><td>image/jpeg</td><td>0.5</td><td>422.63KB</td><td>115ms</td><td>19.59%</td></tr><tr><td>No conversion</td><td>image/jpeg</td><td>0.6</td><td>502.13KB</td><td>119ms</td><td>23.27%</td></tr><tr><td>No conversion</td><td>image/jpeg</td><td>0.7</td><td>671.31KB</td><td>132ms</td><td>31.11%</td></tr><tr><td>No conversion</td><td>image/jpeg</td><td>0.8</td><td>981.27KB</td><td>138ms</td><td>45.48%</td></tr><tr><td>No conversion</td><td>image/jpeg</td><td>0.9</td><td>1735.30KB</td><td>141ms</td><td>80.43%</td></tr><tr><td>No conversion</td><td>image/jpeg</td><td>1</td><td>3957.84KB</td><td>242ms</td><td>183.43%</td></tr><tr><td>No conversion</td><td>image/webp</td><td>0.1</td><td>102.86KB</td><td>823ms</td><td>4.77%</td></tr><tr><td>No conversion</td><td>image/webp</td><td>0.2</td><td>119.93KB</td><td>868ms</td><td>5.56%</td></tr><tr><td>No conversion</td><td>image/webp</td><td>0.3</td><td>138.09KB</td><td>880ms</td><td>6.40%</td></tr><tr><td>No conversion</td><td>image/webp</td><td>0.4</td><td>162.56KB</td><td>903ms</td><td>7.53%</td></tr><tr><td>No conversion</td><td>image/webp</td><td>0.5</td><td>189.30KB</td><td>908ms</td><td>8.77%</td></tr><tr><td>No conversion</td><td>image/webp</td><td>0.6</td><td>218.81KB</td><td>924ms</td><td>10.14%</td></tr><tr><td>No conversion</td><td>image/webp</td><td>0.7</td><td>245.90KB</td><td>940ms</td><td>11.40%</td></tr><tr><td>No conversion</td><td>image/webp</td><td>0.8</td><td>354.95KB</td><td>978ms</td><td>16.45%</td></tr><tr><td>No conversion</td><td>image/webp</td><td>0.9</td><td>817.11KB</td><td>1123ms</td><td>37.87%</td></tr><tr><td>No conversion</td><td>image/webp</td><td>1</td><td>6248.84KB</td><td>2964ms</td><td>289.61%</td></tr><tr><td>No conversion</td><td>pdf/jbig2</td><td>1</td><td>1070.26KB</td><td>1870ms</td><td>49.60%</td></tr><tr><td>No conversion</td><td>pdf/fax4</td><td>1</td><td>1070.26KB</td><td>1561ms</td><td>49.60%</td></tr><tr><td>No conversion</td><td>pdf/jp2000</td><td>0.1</td><td>1.14KB</td><td>2863ms</td><td>0.05%</td></tr><tr><td>No conversion</td><td>pdf/jp2000</td><td>0.2</td><td>1.54KB</td><td>2912ms</td><td>0.07%</td></tr><tr><td>No conversion</td><td>pdf/jp2000</td><td>0.3</td><td>35.32KB</td><td>2936ms</td><td>1.64%</td></tr><tr><td>No conversion</td><td>pdf/jp2000</td><td>0.4</td><td>238.97KB</td><td>2950ms</td><td>11.08%</td></tr><tr><td>No conversion</td><td>pdf/jp2000</td><td>0.5</td><td>1955.23KB</td><td>2934ms</td><td>90.62%</td></tr><tr><td>No conversion</td><td>pdf/jp2000</td><td>0.6</td><td>3835.90KB</td><td>2938ms</td><td>177.78%</td></tr><tr><td>No conversion</td><td>pdf/jp2000</td><td>0.7</td><td>4492.88KB</td><td>2935ms</td><td>208.23%</td></tr><tr><td>No conversion</td><td>pdf/jp2000</td><td>0.8</td><td>4713.78KB</td><td>2965ms</td><td>218.47%</td></tr><tr><td>No conversion</td><td>pdf/jp2000</td><td>0.9</td><td>4765.62KB</td><td>2957ms</td><td>220.87%</td></tr><tr><td>No conversion</td><td>pdf/jp2000</td><td>1</td><td>4772.65KB</td><td>2948ms</td><td>221.20%</td></tr><tr><td>No conversion</td><td>pdf/lzw</td><td>1</td><td>9361.85KB</td><td>1885ms</td><td>433.89%</td></tr><tr><td>Grayscale</td><td>image/png</td><td>1</td><td>8463.15KB</td><td>971ms</td><td>392.24%</td></tr><tr><td>Grayscale</td><td>image/jpeg</td><td>0.1</td><td>170.64KB</td><td>128ms</td><td>7.91%</td></tr><tr><td>Grayscale</td><td>image/jpeg</td><td>0.2</td><td>235.01KB</td><td>116ms</td><td>10.89%</td></tr><tr><td>Grayscale</td><td>image/jpeg</td><td>0.3</td><td>292.26KB</td><td>100ms</td><td>13.55%</td></tr><tr><td>Grayscale</td><td>image/jpeg</td><td>0.4</td><td>351.67KB</td><td>115ms</td><td>16.30%</td></tr><tr><td>Grayscale</td><td>image/jpeg</td><td>0.5</td><td>423.14KB</td><td>108ms</td><td>19.61%</td></tr><tr><td>Grayscale</td><td>image/jpeg</td><td>0.6</td><td>501.47KB</td><td>134ms</td><td>23.24%</td></tr><tr><td>Grayscale</td><td>image/jpeg</td><td>0.7</td><td>669.95KB</td><td>131ms</td><td>31.05%</td></tr><tr><td>Grayscale</td><td>image/jpeg</td><td>0.8</td><td>975.65KB</td><td>124ms</td><td>45.22%</td></tr><tr><td>Grayscale</td><td>image/jpeg</td><td>0.9</td><td>1712.29KB</td><td>152ms</td><td>79.36%</td></tr><tr><td>Grayscale</td><td>image/jpeg</td><td>1</td><td>3593.22KB</td><td>238ms</td><td>166.53%</td></tr><tr><td>Grayscale</td><td>image/webp</td><td>0.1</td><td>97.62KB</td><td>829ms</td><td>4.52%</td></tr><tr><td>Grayscale</td><td>image/webp</td><td>0.2</td><td>115.87KB</td><td>886ms</td><td>5.37%</td></tr><tr><td>Grayscale</td><td>image/webp</td><td>0.3</td><td>135.56KB</td><td>870ms</td><td>6.28%</td></tr><tr><td>Grayscale</td><td>image/webp</td><td>0.4</td><td>158.87KB</td><td>885ms</td><td>7.36%</td></tr><tr><td>Grayscale</td><td>image/webp</td><td>0.5</td><td>184.95KB</td><td>902ms</td><td>8.57%</td></tr><tr><td>Grayscale</td><td>image/webp</td><td>0.6</td><td>213.58KB</td><td>932ms</td><td>9.90%</td></tr><tr><td>Grayscale</td><td>image/webp</td><td>0.7</td><td>239.50KB</td><td>948ms</td><td>11.10%</td></tr><tr><td>Grayscale</td><td>image/webp</td><td>0.8</td><td>343.61KB</td><td>995ms</td><td>15.93%</td></tr><tr><td>Grayscale</td><td>image/webp</td><td>0.9</td><td>788.13KB</td><td>1115ms</td><td>36.53%</td></tr><tr><td>Grayscale</td><td>image/webp</td><td>1</td><td>6303.97KB</td><td>2690ms</td><td>292.17%</td></tr><tr><td>Grayscale</td><td>pdf/jbig2</td><td>1</td><td>1065.67KB</td><td>1419ms</td><td>49.39%</td></tr><tr><td>Grayscale</td><td>pdf/fax4</td><td>1</td><td>1065.67KB</td><td>1369ms</td><td>49.39%</td></tr><tr><td>Grayscale</td><td>pdf/jp2000</td><td>0.1</td><td>1.14KB</td><td>2317ms</td><td>0.05%</td></tr><tr><td>Grayscale</td><td>pdf/jp2000</td><td>0.2</td><td>1.54KB</td><td>2709ms</td><td>0.07%</td></tr><tr><td>Grayscale</td><td>pdf/jp2000</td><td>0.3</td><td>34.67KB</td><td>2993ms</td><td>1.61%</td></tr><tr><td>Grayscale</td><td>pdf/jp2000</td><td>0.4</td><td>224.27KB</td><td>3027ms</td><td>10.39%</td></tr><tr><td>Grayscale</td><td>pdf/jp2000</td><td>0.5</td><td>1770.03KB</td><td>3025ms</td><td>82.04%</td></tr><tr><td>Grayscale</td><td>pdf/jp2000</td><td>0.6</td><td>3402.13KB</td><td>3965ms</td><td>157.68%</td></tr><tr><td>Grayscale</td><td>pdf/jp2000</td><td>0.7</td><td>3879.38KB</td><td>4010ms</td><td>179.80%</td></tr><tr><td>Grayscale</td><td>pdf/jp2000</td><td>0.8</td><td>3936.56KB</td><td>4007ms</td><td>182.45%</td></tr><tr><td>Grayscale</td><td>pdf/jp2000</td><td>0.9</td><td>3942.51KB</td><td>3989ms</td><td>182.72%</td></tr><tr><td>Grayscale</td><td>pdf/jp2000</td><td>1</td><td>3942.93KB</td><td>3975ms</td><td>182.74%</td></tr><tr><td>Grayscale</td><td>pdf/lzw</td><td>1</td><td>8266.73KB</td><td>3088ms</td><td>383.14%</td></tr><tr><td>Black &amp; white</td><td>image/png</td><td>1</td><td>417.82KB</td><td>1101ms</td><td>19.36%</td></tr><tr><td>Black &amp; white</td><td>image/jpeg</td><td>0.1</td><td>246.77KB</td><td>1068ms</td><td>11.44%</td></tr><tr><td>Black &amp; white</td><td>image/jpeg</td><td>0.2</td><td>332.64KB</td><td>1057ms</td><td>15.42%</td></tr><tr><td>Black &amp; white</td><td>image/jpeg</td><td>0.3</td><td>401.65KB</td><td>1060ms</td><td>18.62%</td></tr><tr><td>Black &amp; white</td><td>image/jpeg</td><td>0.4</td><td>452.56KB</td><td>1069ms</td><td>20.97%</td></tr><tr><td>Black &amp; white</td><td>image/jpeg</td><td>0.5</td><td>497.86KB</td><td>1073ms</td><td>23.07%</td></tr><tr><td>Black &amp; white</td><td>image/jpeg</td><td>0.6</td><td>545.16KB</td><td>1064ms</td><td>25.27%</td></tr><tr><td>Black &amp; white</td><td>image/jpeg</td><td>0.7</td><td>603.21KB</td><td>1062ms</td><td>27.96%</td></tr><tr><td>Black &amp; white</td><td>image/jpeg</td><td>0.8</td><td>680.18KB</td><td>1068ms</td><td>31.52%</td></tr><tr><td>Black &amp; white</td><td>image/jpeg</td><td>0.9</td><td>810.47KB</td><td>1072ms</td><td>37.56%</td></tr><tr><td>Black &amp; white</td><td>image/jpeg</td><td>1</td><td>1181.40KB</td><td>1110ms</td><td>54.75%</td></tr><tr><td>Black &amp; white</td><td>image/webp</td><td>0.1</td><td>184.48KB</td><td>907ms</td><td>8.55%</td></tr><tr><td>Black &amp; white</td><td>image/webp</td><td>0.2</td><td>204.71KB</td><td>861ms</td><td>9.49%</td></tr><tr><td>Black &amp; white</td><td>image/webp</td><td>0.3</td><td>218.50KB</td><td>676ms</td><td>10.13%</td></tr><tr><td>Black &amp; white</td><td>image/webp</td><td>0.4</td><td>234.49KB</td><td>695ms</td><td>10.87%</td></tr><tr><td>Black &amp; white</td><td>image/webp</td><td>0.5</td><td>245.78KB</td><td>685ms</td><td>11.39%</td></tr><tr><td>Black &amp; white</td><td>image/webp</td><td>0.6</td><td>254.90KB</td><td>691ms</td><td>11.81%</td></tr><tr><td>Black &amp; white</td><td>image/webp</td><td>0.7</td><td>269.82KB</td><td>714ms</td><td>12.51%</td></tr><tr><td>Black &amp; white</td><td>image/webp</td><td>0.8</td><td>289.72KB</td><td>702ms</td><td>13.43%</td></tr><tr><td>Black &amp; white</td><td>image/webp</td><td>0.9</td><td>330.71KB</td><td>715ms</td><td>15.33%</td></tr><tr><td>Black &amp; white</td><td>image/webp</td><td>1</td><td>66.23KB</td><td>123ms</td><td>3.07%</td></tr><tr><td>Black &amp; white</td><td>pdf/jbig2</td><td>1</td><td>767.85KB</td><td>357ms</td><td>35.59%</td></tr><tr><td>Black &amp; white</td><td>pdf/fax4</td><td>1</td><td>767.85KB</td><td>389ms</td><td>35.59%</td></tr><tr><td>Black &amp; white</td><td>pdf/jp2000</td><td>0.1</td><td>1.14KB</td><td>885ms</td><td>0.05%</td></tr><tr><td>Black &amp; white</td><td>pdf/jp2000</td><td>0.2</td><td>15.26KB</td><td>1562ms</td><td>0.71%</td></tr><tr><td>Black &amp; white</td><td>pdf/jp2000</td><td>0.3</td><td>172.13KB</td><td>2013ms</td><td>7.98%</td></tr><tr><td>Black &amp; white</td><td>pdf/jp2000</td><td>0.4</td><td>351.88KB</td><td>1988ms</td><td>16.31%</td></tr><tr><td>Black &amp; white</td><td>pdf/jp2000</td><td>0.5</td><td>497.57KB</td><td>1997ms</td><td>23.06%</td></tr><tr><td>Black &amp; white</td><td>pdf/jp2000</td><td>0.6</td><td>616.83KB</td><td>3001ms</td><td>28.59%</td></tr><tr><td>Black &amp; white</td><td>pdf/jp2000</td><td>0.7</td><td>683.09KB</td><td>3001ms</td><td>31.66%</td></tr><tr><td>Black &amp; white</td><td>pdf/jp2000</td><td>0.8</td><td>700.55KB</td><td>3036ms</td><td>32.47%</td></tr><tr><td>Black &amp; white</td><td>pdf/jp2000</td><td>0.9</td><td>703.13KB</td><td>2955ms</td><td>32.59%</td></tr><tr><td>Black &amp; white</td><td>pdf/jp2000</td><td>1</td><td>703.47KB</td><td>2979ms</td><td>32.60%</td></tr><tr><td>Black &amp; white</td><td>pdf/lzw</td><td>1</td><td>208.48KB</td><td>2456ms</td><td>9.66%</td></tr>
        </tbody>
      </table>
